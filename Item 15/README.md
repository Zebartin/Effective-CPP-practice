# Item 15: Provide access to raw resources in resource-managing classes.
很多API会直接索要资源而非资源管理对象，因此需要有某种方式从资源管理对象中获取到其中的资源。

## 显式转换

`auto_ptr`和`tr1::shared_ptr`都提供一个`get`成员函数来进行显式转换。

## 隐式转换

`auto_ptr`和`tr1::shared_ptr`还重载了**解引用运算符**（`operator->`和`operator*`），从而能够隐式转换为raw pointer。

另一种隐式转换方式是直接重载类型转换运算符。

## 两者比较

显式转换的设计可能会令人厌烦，导致用户弃用这个资源管理类，从而出现资源泄露的问题；而隐式转换更容易因为不自觉的错误使用而产生问题。

RAII类应提供哪种类型的转换方式需要视情况而定。通常来说，显式转换更为安全。

## 违背封装原则？

这种方式确实与封装背道而驰，但RAII类本来就不是为封装而生的，它只是为了保证资源的正确获取和释放。

有些RAII类会把对实现的封装和对资源的暴露结合在一起。比如`tr1::shared_ptr`暴露了其中的资源，但也封装了对引用计数的实现。

## 总结

- API经常需要直接获取raw resource，所以RAII类应提供获取它所管理的资源的方式；
- 这种获取可以通过显式转换或隐式转换来实现。通常来说前者更安全，但后者对用户来说更为方便。

<a href="../Item%2014"><-</a>

<a href="../Item%2016">-></a>
